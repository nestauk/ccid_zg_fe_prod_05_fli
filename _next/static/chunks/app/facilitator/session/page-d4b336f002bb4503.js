(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[708],{8405:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>to});var i=n(95155),r=n(78211),o=n(92253),a=n(18932),s=n(53285),l=n(25790),c=n(98314),d=n(80431),u=n(21644),x=n(62652),p=n(78314),h=n(77757),f=n(13202),g=n(89207),m=n(48484),j=n(80357),v=n(80317);function b(e){return(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"column",background:"white",borderRadius:2,p:1,...e.sx},children:[(e.title||e.tools)&&(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",mb:1},children:[e.title&&(0,i.jsx)(v.A,{variant:"h6",children:e.title}),e.tools]}),(0,i.jsx)(j.A,{sx:{flexGrow:1,overflowY:"hidden"},children:(0,i.jsx)(j.A,{sx:{width:"100%",height:"100%",overflowY:e.scrolling?"auto":"hidden"},children:e.children})})]})}var A=n(12115),w=n(74246);let y=e=>{let t=Math.floor(e/60);return"".concat(t.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"),":00")};function C(){let{session:e}=(0,A.useContext)(c.$),[t,n]=(0,A.useState)({}),[r,o]=(0,A.useState)(""),a=(0,A.useRef)(void 0);(0,A.useEffect)(()=>{n({startTime:function(e){if(e)return new Date(e)}(e.sessionStartedAt),duration_mins:e.sessionDurationMins})},[e]),(0,A.useEffect)(()=>(t.startTime?(a.current&&clearInterval(a.current),a.current=setInterval(s,1e3),s()):o(t.duration_mins?y(t.duration_mins):"Unknown"),()=>{a.current&&clearInterval(a.current)}),[t]);let s=(0,A.useCallback)(()=>{if(t.startTime){var e;let n,i,r,a=new Date().getTime()-t.startTime.getTime();t.duration_mins&&(a=Math.max(60*t.duration_mins*1e3-a,0)),o((n=Math.floor((e=a)/36e5),i=Math.floor((e-=36e5*n)/6e4),r=Math.floor((e-=6e4*i)/1e3),e-=1e3*r,"".concat(n.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))))}else o(t.duration_mins?y(t.duration_mins):"Unknown")},[t]);return(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center"},children:[(0,i.jsx)("img",{src:"/icons/clock.svg",style:{height:"1.25rem",width:"auto"}}),(0,i.jsx)(v.A,{variant:"body1",children:r})]})}var S=n(92612),k=n(74879),I=n(9436);function R(e,t){let n=document.createElement("a");n.href=e,n.download=t;try{document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}catch(e){console.error("Error downloading blob",e)}finally{document.body.removeChild(n)}return e}var T=n(54884),E=n(84073),D=n(18414),F=n(50533),U=n(27855),_=n(91911),P=n(71385),L=n(88379);function O(e){let t=(0,A.useId)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(P.Ay,{variant:"popover",popupId:t,children:t=>{var n,r,o;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U.A,{startIcon:!1!==e.startIcon?e.startIcon:void 0,endIcon:null!=(n=e.endIcon)?n:(0,i.jsx)(F.A,{color:"action"}),variant:"text",color:"buttonStandard","aria-label":e.ariaLabel,sx:e.sx,...(0,L.o2)(t),children:e.text}),(0,i.jsx)(_.Ay,{...(0,L.dB)(t),anchorOrigin:null!=(r=e.anchorOrigin)?r:{vertical:"bottom",horizontal:"center"},transformOrigin:null!=(o=e.transformOrigin)?o:{vertical:"top",horizontal:"center"},children:(0,i.jsx)(j.A,{sx:{p:2},children:e.children})})]})}})})}var W=n(31240),N=n(42908),M=n(33562),K=n(44004),B=n(27001),$=n(39620),z=n(94402),q=n(61800),G=n(59587),Q=n(2218),V=n(50301),Y=n(25789),H=n(35348),Z=n(41477),J=n(49571),X=n(14962),ee=n(77524),et=n(24251),en=n(90309);let ei=new RegExp(/^.*anker powerconf.*$/i),er=(e,t)=>{var n;return"".concat(null!=(n=t.recordingId)?n:"slide-"+"".concat((null!=e?e:0)+1).padStart(3,"0"))};function eo(){var e;let{session:t}=(0,A.useContext)(c.$),{slideData:n}=(0,d.Zm)(),[r,o]=(0,A.useState)(!1),[s,l]=(0,A.useState)(()=>t.audience===a.Th.LiveWorkshop);(0,A.useEffect)(()=>{o(t.facilitationState===a.ve.Open&&t.remoteConfiguration===a.LQ.InPerson&&(0,T.s)(n.recordingId))},[n.recordingId,t.facilitationState,t.remoteConfiguration]);let[u,p]=(0,A.useState)(!1),[h,f]=(0,A.useState)(!1),[g,m]=(0,A.useState)(!1),[b,w]=(0,A.useState)(""),[y,C]=(0,A.useState)(!1),{record:_,stop:P,recordingStatus:L,recordingQueue:eo,recordingHistory:ea,uploadBlobUrl:es,startDownload:el}=function(){let{api:e,start:t}=(0,A.useContext)(D.F),n=(0,A.useContext)(E.yk),{session:i}=(0,A.useContext)(c.$),[r,o]=(0,A.useState)([]),[a,s]=(0,A.useState)([]),l="webm",d=e=>"audio-recording-".concat(e),{status:u,startRecording:x,stopRecording:p}=(0,S.useReactMediaRecorder)({audio:{noiseSuppression:!0,autoGainControl:!0},mediaRecorderOptions:{mimeType:"audio/webm"},onStart:()=>h(),onStop:(e,t)=>g(e,t)});(0,A.useEffect)(()=>{"recording"!==u&&"stopping"!==u&&r.length>0&&x()},[u,r]);let h=()=>{0===r.length?o([f()]):o(e=>[{...e[0],startTime:new Date},...e.slice(1)])},f=()=>({filenameSuffix:l,id:"unknown",filenamePart:d("unknown-".concat((0,k.A)())),startTime:new Date}),g=(e,t)=>{var n;let i=r.length>0?r[0]:f(),a=t.size>0?"uploading":"empty",l={id:(0,k.A)(),recordingId:i.id,filenamePart:i.filenamePart,filenameSuffix:i.filenameSuffix,audioBlobUrl:e,startTime:null!=(n=i.startTime)?n:new Date,state:a,failReason:void 0,couldRetryUpload:!1,attempts:0};s(e=>[...e,l]),r.length>0?o(e=>e.slice(1)):o([]),"uploading"===a?(console.debug("Uploading recording..."),m(t,i.filenamePart,i.filenameSuffix,l)):console.debug("Recording is empty, not uploading.")},m=async(r,o,a,l)=>{try{console.debug("Retrieving recording upload info...");let c=await t(e.getMediaUploadUrl(i.id,n.sessionToken,n.user.access_token,"deliberation",o,a));if((0,T.s)(c))console.debug("Uploading recording...",c),await t((0,I.q)(r,"application/octet-stream",c.uploadUrl,!0,"uploading recording")),s(e=>e.map(e=>e.id===l.id?{...e,state:"uploaded",failReason:void 0,couldRetryUpload:!0,attempts:e.attempts+1}:e)),console.debug("Upload recording complete.");else throw console.error("No media upload info found. Cannot upload recording."),Error("No media upload info found.")}catch(e){s(t=>t.map(t=>t.id===l.id?{...t,state:"upload-failed",failReason:"".concat(e),couldRetryUpload:!0,attempts:t.attempts+1}:t))}};return{record:e=>{o(t=>[...t,{id:e,filenamePart:d(e),filenameSuffix:l,audioBlob:void 0,audioBloblUrl:void 0,startTime:void 0}]),"recording"===u&&p()},stop:()=>{"recording"===u&&p()},recordingStatus:u,recordingQueue:r,recordingHistory:a,uploadBlobUrl:async(e,t,n,i)=>{let r=await fetch(e).then(e=>e.blob());await m(r,t,n,i)},startDownload:e=>{var t;if(!(0,T.s)(e.audioBlobUrl))return void console.debug("Audio blob empty. Skipping download.");let n="recording-".concat(null!=(t=e.filenamePart)?t:"unknown",".").concat(e.filenameSuffix);console.debug("Downloading audio recording..."),R(e.audioBlobUrl,n)}}}();(0,A.useEffect)(()=>{var e;let t=er(n.index,n);void 0!==n.recordingId&&s&&(null==(e=eo[0])?void 0:e.id)!==t&&_(t),void 0===n.recordingId&&"recording"===L&&P()},[n.recordingId,n.index,s]),(0,A.useEffect)(()=>{p("recording"===L),"recording"===L&&f(!1)},[L]),(0,A.useEffect)(()=>{ec()},[]);let ec=async()=>{var e;let t=(await navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0].getSettings().deviceId;(null==(e=navigator.mediaDevices)?void 0:e.enumerateDevices)?(m(!0),navigator.mediaDevices.enumerateDevices().then(e=>{e.forEach(e=>{"audioinput"===e.kind&&e.deviceId===t&&(w(e.label),C(-1!==e.label.search(ei)))})})):m(!1)},ed=(0,Y.A)(),eu=u||h;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(O,{startIcon:eu&&(0,i.jsx)(z.A,{htmlColor:u?ed.palette.recordingEnabled.main:h?ed.palette.recordingFailed.main:ed.palette.recordingDisabled.main}),endIcon:(0,i.jsx)(F.A,{color:"action"}),sx:{opacity:r?1:.3},text:"Recording: ".concat(u?"Active":h?"Error":"Inactive"),ariaLabel:"Recording information",children:(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"column",gap:1,maxWidth:"40rem"},children:[!u&&(0,i.jsx)(U.A,{variant:r?"contained":"outlined",color:r?"primary":"buttonStandard",onClick:()=>_(er(n.index,n)),children:"Start Recording"}),u&&(0,i.jsx)(U.A,{variant:"outlined",color:"buttonStandard",onClick:()=>{P()},children:"Stop Recording"}),n.recordingId&&(0,i.jsxs)(v.A,{variant:"body2",children:["Recording id: ",n.recordingId]}),u&&(0,T.s)(null==(e=eo[0])?void 0:e.startTime)&&(0,i.jsxs)(v.A,{variant:"body2",sx:{fontSize:"0.7rem"},children:["Recording started: ",(0,i.jsx)(en.A,{date:eo[0].startTime})]}),(0,i.jsx)(H.A,{sx:{marginTop:"0.5rem"},children:(0,i.jsx)(Z.A,{control:(0,i.jsx)(J.A,{checked:s,onChange:()=>{l(e=>!e)},sx:{margin:"0 0.5rem 0 0.75rem"}}),label:"Automatic recording",sx:{userSelect:"none"}})}),h&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center"},children:[(0,i.jsx)(z.A,{htmlColor:ed.palette.recordingFailed.main}),(0,i.jsx)(v.A,{variant:"body1",children:"Unexpected error"})]}),(0,i.jsx)(v.A,{variant:"body2",children:"An unexpected error occurred during recording."})]}),g&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"start"},children:[(0,i.jsx)(U.A,{color:"buttonStandard",disabled:"recording"===L,onClick:()=>ec(),sx:{marginTop:"0.5rem"},variant:"outlined",children:(0,i.jsx)(x.A,{i18nKey:"audioRecorder.checkMic"})}),""!==b&&(0,i.jsxs)(j.A,{children:[(0,i.jsxs)(v.A,{sx:{backgroundColor:y?ed.palette.taskSuccess.main:ed.palette.taskFailed.main,p:1},variant:"body2",children:[y?"✅ ":"⚠️ ",b]}),!y&&(0,i.jsx)(v.A,{sx:{p:1},variant:"body2",children:(0,i.jsx)(x.A,{i18nKey:"audioRecorder.preferredMicProblem"})})]})]})}),ea.length>0&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(X.A,{children:[(0,i.jsx)(ee.A,{"aria-controls":"history-content",id:"history-header",expandIcon:(0,i.jsx)($.A,{}),children:(0,i.jsx)(v.A,{variant:"body1",children:"Recording history"})}),(0,i.jsx)(et.A,{children:(0,i.jsx)(j.A,{sx:{display:"grid",gridTemplateColumns:"auto auto 1fr auto auto",rowGap:1,columnGap:1},children:[...ea].reverse().map(e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.A,{children:(0,i.jsxs)(v.A,{variant:"body2",sx:{fontWeight:"bold"},children:["".concat(ea.indexOf(e)+1).padStart(3,"0"),"."]})},"history-count-".concat(e.id)),(0,i.jsx)(j.A,{children:((e,t,n,r)=>{let o,a;switch(e){case"empty":o="No recording.",a=(0,i.jsx)(G.A,{color:"error"});break;case"uploading":o="Upload in progress...",a=(0,i.jsx)(q.A,{color:"action"});break;case"uploaded":o="Upload complete.",a=(0,i.jsx)(M.A,{color:"success"});break;case"upload-failed":o="Failed: ".concat(t," (").concat(null!=n?n:0," attempts)."),r&&(o+=" You may retry uploading."),a=(0,i.jsx)(Q.A,{color:"warning"});break;default:o="Unknown state",a=(0,i.jsx)(K.A,{color:"error"})}return(0,i.jsx)(V.A,{title:o,children:a})})(e.state,e.failReason,e.attempts,e.couldRetryUpload)},"history-state-".concat(e.id)),(0,i.jsx)(j.A,{children:(0,i.jsx)(v.A,{variant:"body2",children:e.recordingId})},"history-name-".concat(e.id)),(0,i.jsx)(j.A,{children:(0,i.jsx)(V.A,{title:"Download file",children:(0,i.jsx)(W.A,{btnKey:"download",variant:"outlined",size:"small",color:"buttonStandard",content:(0,i.jsx)(B.A,{}),disabled:!(0,T.s)(e.audioBlobUrl),onClick:()=>el(e),showText:!1})})},"history-download-".concat(e.id)),(0,i.jsx)(j.A,{children:(0,i.jsx)(V.A,{title:"Retry upload",children:(0,i.jsx)(W.A,{btnKey:"upload",variant:"outlined",size:"small",color:"buttonStandard",content:(0,i.jsx)(N.A,{}),disabled:!(0,T.s)(e.audioBlobUrl)||!e.couldRetryUpload||"uploading"===e.state||"empty"===e.state,onClick:()=>es(e.audioBlobUrl,e.filenamePart,e.filenameSuffix,e),showText:!1},"history-upload-".concat(e.id))})},"history-upload-".concat(e.id))]}))})})]})})]})})})}var ea=n(57300),es=n(91955),el=n(77240),ec=n(25367);function ed(e){var t;let n=e.message instanceof Error?e.message.message:e.message;return(0,i.jsx)(ec.A,{open:e.show,autoHideDuration:null!=(t=e.autoHideDuration)?t:3e3,onClose:()=>e.setShow(!1),message:(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center"},children:[e.icon,n]})})}function eu(e){let[t,n]=(0,A.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(W.A,{sx:{alignSelf:"flex-end"},variant:"outlined",onClick:()=>{var t;null==(t=navigator)||t.clipboard.writeText((0,el.f)(e.session)),n(!0)},btnText:"Copy participant link",btnKey:"copy-participant-link"}),(0,i.jsx)(ed,{show:t,setShow:n,message:"Copied participant link to clipboard.",icon:(0,i.jsx)(es.A,{})})]})}var ex=n(39268),ep=n(60193),eh=n(48464),ef=n(87920),eg=n(23405),em=n(19131),ej=n(45279),ev=n(66088),eb=n(57915),eA=n(32276);function ew(){let{session:e}=(0,A.useContext)(c.$),{subscriptions:t,thisUser:n}=(0,A.useContext)(ea.f),{api:r,start:o}=(0,A.useContext)(D.F),{user:s,deviceId:l,sessionToken:d}=(0,A.useContext)(E.yk),[u,x]=(0,A.useState)([]),[p,h]=(0,A.useState)(!1),f=(0,eb.A)(),g=async()=>{try{h(!0);let t={action:"mute",sessionId:e.id,ticks:Date.now(),originator:l,parameters:{pids:["*"]}};o(r.postFacilitatorAction(s.access_token,d,t,!1))}finally{h(!1)}},m=async(t,n)=>{try{h(!0);let t={action:"mute",sessionId:e.id,ticks:Date.now(),originator:l,parameters:{pids:[n.deviceId]}};o(r.postFacilitatorAction(s.access_token,d,t,!1))}catch(e){console.warn(e)}finally{h(!1)}},b=async(t,n)=>{try{h(!0);let t={action:"kick",sessionId:e.id,ticks:Date.now(),originator:l,parameters:{pid:n.deviceId}};o(r.postFacilitatorAction(s.access_token,d,t,!1))}catch(e){console.warn(e)}finally{h(!1)}},w=t=>{var n,r;let{subscription:o}=t,a=R(o),s=null!=(r=null==(n=e.deviceIdBanList)?void 0:n.includes(o.deviceId))&&r;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(j.A,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"row",gap:1,alignItems:"center",opacity:s?.5:1},children:[(0,i.jsx)(I,{connected:!s&&o.enabled}),(0,i.jsxs)(v.A,{variant:"h6",component:"span",sx:{flexGrow:1},children:[a,s?" (banned)":void 0]})]})})},y=t=>{var n,r,o;let{subscription:a}=t,{roster:s}=(0,eA.Abl)(),l=s?null==(n=Object.entries(s).find(e=>{let[t,n]=e;return n.externalUserId===a.deviceId}))?void 0:n[1]:void 0,c=R(a),d=null!=(o=null==(r=e.deviceIdBanList)?void 0:r.includes(a.deviceId))&&o;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(j.A,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"row",gap:1,alignItems:"center",opacity:d?.5:1},children:[(0,i.jsx)(I,{connected:!d&&a.enabled}),(0,i.jsxs)(v.A,{variant:"h6",component:"span",sx:{flexGrow:1},children:[c,d?" (banned)":void 0]}),l&&!d&&(0,i.jsx)(C,{attendee:l,subscription:a})]})})},C=e=>{let{attendee:t,subscription:r}=e;return(0,i.jsx)(i.Fragment,{children:r.subscriptionId!==(null==n?void 0:n.subscriptionId)&&(0,i.jsx)(S,{attendee:t,subscription:r})})},S=e=>{let{attendee:t,subscription:n}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(P.Ay,{variant:"popover",popupId:"attendee-controls-menu-items-".concat(n.subscriptionId),children:e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ep.A,{"aria-label":"settings",...(0,L.cO)(e),children:(0,i.jsx)("img",{src:"/icons/triple-dots-vertical.svg"})}),(0,i.jsx)(eh.A,{...(0,L.NA)(e),children:(0,i.jsx)(k,{attendee:t,subscription:n,requestClose:e.close})})]})})})},k=e=>{let{attendee:t,subscription:n,requestClose:r}=e,[o,a]=(0,A.useState)(!1),s=(0,eA.Y$K)(t.chimeAttendeeId).muted;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ef.A,{children:[(0,i.jsx)(eg.A,{children:(0,i.jsx)(em.A,{children:(0,i.jsx)("b",{children:n.participantName})})},"attendee-control-menu-header-".concat(n.subscriptionId)),(0,i.jsxs)(eg.A,{disabled:p||s,onClick:s?void 0:()=>{r(),m(t,n)},children:[(0,i.jsx)(ej.A,{children:s?(0,i.jsx)("img",{src:"/icons/controls/participant-muted.svg"}):(0,i.jsx)("img",{src:"/icons/controls/mute-participant.svg"})}),(0,i.jsx)(em.A,{inset:!1,children:s?"Participant muted":"Mute participant"})]},"attendee-control-menu-item-".concat(n.subscriptionId,"-mute")),(0,i.jsxs)(eg.A,{disabled:p,onClick:()=>{a(!0)},children:[(0,i.jsx)(ej.A,{children:(0,i.jsx)("img",{src:"/icons/controls/remove-participant.svg"})}),(0,i.jsx)(em.A,{inset:!1,children:"Remove participant"})]},"attendee-control-menu-item-".concat(n.subscriptionId,"-kick"))]}),(0,i.jsx)(ex.A,{prompt:"Remove the participant from the call?",options:[{key:"kick",text:"Remove participant",filled:!0},{key:"cancel",text:"Cancel",filled:!1}],onSelect:e=>{"kick"===e&&b(t,n)},open:o,setOpen:a,onClose:r})]})},I=e=>{let{connected:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(j.A,{sx:{p:1,borderRadius:4,height:42,background:t?f.palette.connected.main:f.palette.disconnected.main},children:(0,i.jsx)("img",{style:{height:26,margin:0,padding:0},src:t?"/icons/device-connected.svg":"/icons/device-disconnected.svg"})})})},R=e=>{let t=e.subscriptionId===(null==n?void 0:n.subscriptionId)?"(You) ":"",i=e.participantName&&e.participantName.length>0?e.participantName:"Unknown";return"".concat(t).concat(i)};return(0,A.useEffect)(()=>{x([...t].sort((e,t)=>e.role===t.role?0:e.role===a.sW.Controller?-1:t.role===a.sW.Controller?1:e.participantName.localeCompare(t.participantName)))},[t]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"column",gap:4},children:[(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"row",gap:1,justifyContent:"flex-end"},children:[e.remoteConfiguration===a.LQ.RemoteWithVideoCall&&(0,i.jsx)(W.A,{variant:"outlined",startIcon:(0,i.jsx)("img",{src:"/icons/controls/participant-muted.svg"}),btnKey:"mute-all",btnText:"Mute all",sx:{alignSelf:"flex-end"},busy:p,onClick:e=>{g()}}),(0,i.jsx)(eu,{session:e})]}),(0,i.jsx)(ev.A,{container:!0,spacing:2,children:u.map(t=>(0,i.jsxs)(ev.A,{size:{xs:6},children:[e.remoteConfiguration===a.LQ.RemoteWithVideoCall&&(0,i.jsx)(y,{subscription:t}),e.remoteConfiguration!==a.LQ.RemoteWithVideoCall&&(0,i.jsx)(w,{subscription:t})]},"participant-subscription-indicator-".concat(t.subscriptionId)))})]})})}function ey(){let{subscriptions:e,thisUser:t}=(0,A.useContext)(ea.f);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(O,{startIcon:(0,i.jsx)("img",{src:"/icons/session-participants.svg",style:{height:"1.45rem",width:"auto"}}),text:"".concat(e.filter(e=>e.deviceId!==(null==t?void 0:t.deviceId)).length," participants"),children:(0,i.jsx)(j.A,{sx:{width:"55vw"},children:(0,i.jsx)(ew,{})})})})}var eC=n(73017),eS=n(61451),ek=n(34466),eI=n(38837),eR=n(47734),eT=n(74595),eE=n(71403);function eD(e){let{colours:t,data:n}=e,r=e=>{let t={true:{l:!0,r:!1},false:{l:!1,r:!0}};return 0===e.true&&(t.false.l=!0),0===e.false&&(t.true.r=!0),t},[o,a]=(0,A.useState)(r(n));(0,A.useEffect)(()=>{a(r(n))},[n]);let s=e=>[16*!!e.l,16*!!e.r,16*!!e.r,16*!!e.l];return(0,i.jsx)(ek.u,{width:"100%",height:40,children:(0,i.jsxs)(eI.E,{layout:"vertical",margin:{left:0,right:0},height:40,data:[{name:"completion",complete:n.true,incomplete:n.false}],children:[(0,i.jsx)(eR.W,{hide:!0,type:"number",max:n.true+n.false}),(0,i.jsx)(eT.h,{hide:!0,dataKey:"name",type:"category"}),(0,i.jsx)(eE.y,{dataKey:"complete",stackId:"completion",fill:t[0],radius:s(o.true)}),(0,i.jsx)(eE.y,{dataKey:"incomplete",stackId:"completion",fill:t[1],radius:s(o.false)})]})})}var eF=n(10310),eU=n(35275),e_=function(e){return e[e.NotAnswered=0]="NotAnswered",e[e.Answered=1]="Answered",e}(e_||{});let eP=(e,t,n,i,r,o)=>{var s;let l=eL(null!=(s=n?null==e?void 0:e.filter(e=>e.questionId===n):e)?s:[]),c=l.length,d=t.filter(e=>e.enabled&&e.role===a.sW.Client),u=d.filter(e=>!l.find(t=>t.participantId===e.deviceId));if(void 0!==o&&!0===o.noselfvoting&&void 0!==r&&0!==r.length){let e=r.filter(e=>e.id===i);if(1===e.length){let t=e[0].participantId;u=d.filter(e=>e.deviceId!==t).filter(e=>!l.find(t=>t.participantId===e.deviceId))}}let x=l.length+u.length;return{allAnswers:l,relevantParticipants:d,answeredCount:c,participantsWithoutAnswers:u,maxAnswers:x,complete:c===x}},eL=e=>e.sort((e,t)=>new Date(e.created).getTime()-new Date(t.created).getTime()),eO=e=>{var t,n;return null!=(n=null!=(t=null==e?void 0:e.participantName)?t:null==e?void 0:e.deviceName)?n:"Unknown"};function eW(e){let{sid:t}=(0,A.useContext)(eF.L),{answers:n}=(0,eC.Ay)(e.qid),r=(0,A.useContext)(ea.f),[o,a]=(0,A.useState)(r.subscriptions),[s,l]=(0,A.useState)(eP(n,o,e.qid,e.answerQid,e.allParticipantInput,e.answerRules)),[c,d]=(0,A.useState)([]);(0,A.useEffect)(()=>{a(r.subscriptions)},[r]),(0,A.useEffect)(()=>{l(eP(n,o,e.qid,e.answerQid,e.allParticipantInput,e.answerRules))},[n,o]),(0,A.useEffect)(()=>{var e;d([...s.allAnswers.map((e,t)=>{let n;return{description:(n=e,eO(o.find(e=>e.deviceId===n.participantId))),answered:1}}),...null!=(e=s.participantsWithoutAnswers.map(e=>({description:eO(e),answered:0})))?e:[]])},[s,o]);let u=e=>(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderRadius:2,background:"white",border:"1px solid #EFEFEF",p:2},children:[(0,i.jsx)(v.A,{variant:"body1",sx:{borderRight:"1px solid black",overflowX:"scroll",textWrap:"nowrap",flexGrow:1,mr:.5,pr:.5},children:e.description}),1===e.answered&&(0,i.jsx)("img",{src:"/icons/checkbox-filled.svg"}),1!==e.answered&&(0,i.jsx)("img",{src:"/icons/checkbox.svg"})]}),x=(0,eb.A)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch"},children:[e.qid&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center"},children:[(0,i.jsx)("img",{src:"/icons/busts.svg",style:{height:"1.5rem",width:"auto"}}),(0,i.jsxs)(v.A,{variant:"body1",children:[e.label&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("b",{children:[e.label,":"]})," "]}),"".concat(s.answeredCount," of ").concat(s.maxAnswers," ")," ",1!==s.answeredCount?"have":"has"," voted"]})]}),(0,i.jsxs)(X.A,{elevation:0,disableGutters:!0,sx:{"&:before":{display:"none"}},children:[(0,i.jsxs)(ee.A,{expandIcon:(0,i.jsx)(eU.A,{}),sx:{p:0},children:[s.answeredCount+s.participantsWithoutAnswers.length>0&&(0,i.jsx)(eD,{colours:[x.palette.primary.main,"#ededff"],data:{true:s.answeredCount,false:s.participantsWithoutAnswers.length}}),s.answeredCount+s.participantsWithoutAnswers.length===0&&(0,i.jsx)(eD,{colours:[x.palette.primary.main,"#ededff"],data:{true:0,false:100}})]}),(0,i.jsx)(et.A,{sx:{p:0},children:(0,i.jsx)(ev.A,{container:!0,spacing:1,sx:{mb:2},children:c.map((t,n)=>(0,i.jsx)(ev.A,{size:{xs:12,sm:6,md:4},children:(0,i.jsx)(u,{description:t.description,answered:t.answered})},"answer-indicator-grid-item-".concat(e.qid,"-").concat(n)))})})]})]}),!e.qid&&(0,i.jsx)(v.A,{variant:"body1",children:"Not a polling slide"})]})})}let eN="".concat(eS.L,"[PARTICIPANT_INPUT]"),eM=eN.replace(/[\]\[]/g,"\\$&"),eK=new RegExp("^[a-z0-9-]+".concat(eM,"$")),eB=e=>e.replace(new RegExp("^([a-z0-9-]+)(".concat(eS.L,"[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})$")),"$1"),e$=e=>e.replace(new RegExp("^([a-z0-9-]+".concat(eS.L,")([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})$")),"$2"),ez=(e,t)=>e[t]||[];function eq(){let{allSlideAnswerRules:e}=(0,d.Of)(),{slideData:t}=(0,d.Zm)(),{subscriptions:n}=(0,A.useContext)(ea.f),{allAnswers:r}=(0,eC.Ay)(),[o,a]=(0,A.useState)(!1),[s,l]=(0,A.useState)({}),[c,u]=(0,A.useState)(!1),[x,p]=(0,A.useState)(),[h,f]=(0,A.useState)(t.qids);(0,A.useEffect)(()=>{let e=[];t.qids.forEach(t=>{if(!0===eK.test(t)){let n=t.replace(eN,""),i=eL(ez(r,n));if(void 0!==i&&0!==i.length)for(let t=0;t<i.length;t++)e.push("".concat(n).concat(eS.L).concat(i[t].id))}else e.push(t)}),f(e)},[r,t]),(0,A.useEffect)(()=>{a(h.length>0)},[h]),(0,A.useEffect)(()=>{l(Object.fromEntries(h.map(t=>[t,eP(r[t],n,t,e$(t),ez(r,eB(t)),e?e[eB(t)]:void 0)])))},[r,h,e,t,n]),(0,A.useEffect)(()=>{u(Object.values(s).every(e=>e.complete))},[s]);let g=(0,Y.A)();return(0,A.useEffect)(()=>{let e=c?g.palette.pollingComplete.main:g.palette.pollingInProgress.main;p(o?{icon:(0,i.jsx)(z.A,{htmlColor:e}),text:c?"Polling complete":"Polling in progress"}:void 0)},[c,o]),(0,i.jsx)(i.Fragment,{children:o&&x&&(0,i.jsx)(O,{startIcon:x.icon,text:x.text,sx:{backgroundColor:g.palette.pollingInProgressBackground.main},children:(0,i.jsx)(j.A,{sx:{width:"55vw",display:"flex",flexDirection:"column",gap:1},children:h.map((t,n)=>{let o=h.length>1?0===n?"First question":n===h.length-1?"Last question":void 0:void 0;return(0,i.jsx)(eW,{qid:t,label:o,answerQid:e$(t),allParticipantInput:ez(r,eB(t)),answerRules:e?e[eB(t)]:void 0},"facilitator-polling-monitor-".concat(t,"-").concat(n))})})})})}function eG(){let{deviceId:e,sessionToken:t,user:n}=(0,A.useContext)(E.yk),{session:r}=(0,A.useContext)(c.$),{api:o,start:s}=(0,A.useContext)(D.F),[l,d]=(0,A.useState)(!1),[u,x]=(0,A.useState)(!1),[p,h]=(0,A.useState)({key:"",text:"Please wait...",variant:"outlined"});(0,A.useEffect)(()=>{switch(r.facilitationState){case a.ve.Ready:h({key:"open-session",text:"Open workshop",variant:"contained"});break;case a.ve.Open:h({key:"close-session",text:"Close workshop",variant:"outlined"});break;case a.ve.Closed:h({key:"open-waiting",text:"Open waiting room",variant:"contained"})}},[r]);let f=async i=>{try{d(!0);var l={action:i===a.ve.Open?"open":i===a.ve.Ready?"reset":"close",sessionId:r.id,originator:e,ticks:Date.now()};await s(o.postFacilitatorAction(n.access_token,t,l))}catch(e){console.error(e)}finally{d(!1)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(W.A,{busy:l,variant:p.variant,btnKey:p.key,btnText:p.text,onClick:e=>{switch(e){case"open-waiting":f(a.ve.Ready);break;case"open-session":f(a.ve.Open);break;case"close-session":x(!0);break;default:console.warn("Unexpected facilitation switch from menu.")}}}),(0,i.jsx)(ex.A,{open:u,setOpen:x,prompt:"Are you sure you want to close the workshop?",onSelect:e=>{"close"===e&&f(a.ve.Closed)},options:[{key:"close",text:"Close",filled:!0},{key:"cancel",text:"Cancel",filled:!1}]})]})}var eQ=n(34824),eV=n(12460);let eY=["session_id","start_time_raw","start_time_hr","end_time_raw","end_time_hr","speaker_role","speaker_did","speaker_pid","transcript"];var eH=n(78055),eZ=n(24274);let eJ=(e,t)=>{var n;return"".concat(null!=(n=t.recordingId)?n:"slide-"+"".concat((null!=e?e:0)+1).padStart(3,"0"))};function eX(){var e,t;let{api:n,start:r}=(0,A.useContext)(D.F),{session:o}=(0,A.useContext)(c.$),s=(0,A.useContext)(E.yk),{slideData:l}=(0,d.Zm)(),{t:u}=(0,eZ.Bd)(),[p,h]=(0,A.useState)(!1),[f,g]=(0,A.useState)(()=>o.audience===a.Th.LiveWorkshop),[m,b]=(0,A.useState)(!1);(0,A.useEffect)(()=>{h(o.facilitationState===a.ve.Open&&o.remoteConfiguration===a.LQ.RemoteWithVideoCall&&l.activity===eH.t.deliberation),b(o.facilitationState===a.ve.Open&&o.remoteConfiguration===a.LQ.RemoteWithVideoCall&&l.activity===eH.t.deliberation&&void 0!==l.recordingId)},[l.activity,l.recordingId,o.facilitationState,o.remoteConfiguration]);let[w,y]=(0,A.useState)(eJ(l.index,l)),[C,S]=(0,A.useState)(!1),[k,_]=(0,A.useState)(!1),[P,L]=(0,A.useState)(!1),{clearTranscription:W,filenamePart:N,isTranscribing:M,startTranscribing:K,stopTranscribing:B,transcribingTime:$,transcriptionBlobs:q}=function(){let{api:e,start:t}=(0,A.useContext)(D.F),{session:n}=(0,A.useContext)(c.$),{user:i,deviceId:r,sessionToken:o}=(0,A.useContext)(E.yk),{subscriptions:s}=(0,A.useContext)(ea.f),l=(0,eA.n3W)(),[d,u]=(0,A.useState)(),[x,p]=(0,A.useState)([]),[h,f]=(0,A.useState)([]),[g,m]=(0,A.useState)(1),[j,v]=(0,A.useState)(),[b,w]=(0,A.useState)(void 0),[y,C]=(0,A.useState)(!1),[S,k]=(0,A.useState)(),[I,R]=(0,A.useState)(0),F=(0,A.useCallback)(()=>{k(setInterval(()=>{R(e=>e+1)},1e3))},[R,k]),U=(0,A.useCallback)(()=>{null!=S&&clearInterval(S),k(void 0)},[S,k]),_=async a=>{if(!(0,T.s)(i))throw"Not ready";let s={action:a,sessionId:n.id,originator:r,ticks:Date.now()},l=await t(e.postFacilitatorAction(i.access_token,o,s));return(0,T.s)(l)};(0,A.useEffect)(()=>{m(y?5:1)},[y]),(0,A.useEffect)(()=>{if(y&&void 0!==d&&!d.isPartial){var e,t,i,r;let o=n.id,l=d.startTimeMs,c=new Date(d.startTimeMs).toLocaleString(),u=d.endTimeMs,x=new Date(d.endTimeMs).toLocaleString(),h=null!=(r=null==(t=d.alternatives[0])||null==(e=t.items[0])?void 0:e.attendee.externalUserId)?r:"unknown",f="".concat(o,":").concat(h),g=null==(i=s.find(e=>e.deviceId==h))?void 0:i.role,m=[o,l,c,u,x,(0,T.s)(g)?a.sW[g]:"unknown",h,f,d.alternatives[0].transcript];p(e=>[...e,m])}},[y,d]),(0,A.useEffect)(()=>{if(l){var e;null==(e=l.transcriptionController)||e.subscribeToTranscriptEvent(P)}return()=>{if(l){var e;null==(e=l.transcriptionController)||e.unsubscribeFromTranscriptEvent(P)}}},[l]);let P=e=>{f(t=>[...t,e]),e instanceof eQ.Transcript&&u(e.results[0])};return{clearTranscription:()=>{p([]),f([]),w(void 0),v(void 0)},filenamePart:j,isTranscribing:y,startTranscribing:async e=>{if(null!=S)return;v("transcription-".concat(e)),u(void 0),p([]),f([]);let t=!1;try{t=await _("start-transcription")}catch(e){m(3);return}t&&(C(!0),F())},stopTranscribing:async()=>{let e=!1;try{e=await _("stop-transcription")}catch(e){m(4);return}e&&(U(),R(0),C(!1),w({csv:{blob:new Blob([(0,eV.A)(x,{header:!0,columns:eY})],{type:"text/csv"}),filenameSuffix:"csv"},json:{blob:new Blob([JSON.stringify(h)],{type:"application/json"}),filenameSuffix:"json"}}))},transcribingState:g,transcribingTime:I,transcriptionBlobs:b}}();(0,A.useEffect)(()=>{M&&(console.debug("Stopping transcribing due to slide change."),b(!1),B())},[l.index]),(0,A.useEffect)(()=>{y(eJ(l.index,l))},[l.index,l]),(0,A.useEffect)(()=>{f&&m&&!M&&(console.debug("Starting automatic transcribing."),K(w))},[f,M,m,w]),(0,A.useEffect)(()=>{S(M),M&&L(!1)},[M]),(0,A.useEffect)(()=>{M||void 0===q||void 0===N||G()},[q]);let G=()=>{var e,t;return void 0===q||void 0===N?void console.debug("Transcription blob or filename part empty. Skipping upload."):(null==(e=q.csv)?void 0:e.blob.size)===0&&(null==(t=q.json)?void 0:t.blob.size)===0?void console.debug("Transcription is empty. Skipping upload."):void(console.debug("Initiating upload for transcription: ".concat(N)),L(!1),_(!0),Q(q,N).then(()=>{console.debug("Upload complete"),L(!1),W()}).catch(e=>{console.error("Upload failed",e),L(!0)}).finally(()=>{_(!1)}))},Q=async(e,t)=>{if(console.debug("Transcription upload: ".concat(t,": "),e),console.debug("Retrieving transcription upload info..."),void 0!==e.json){let i=await r(n.getMediaUploadUrl(o.id,s.sessionToken,s.user.access_token,"deliberation",t,e.json.filenameSuffix));(0,T.s)(i)&&(console.debug("Uploading transcription JSON...",i),await r((0,I.q)(e.json.blob,"application/json",i.uploadUrl,!0,"uploading transcription JSON")))}if(void 0!==e.csv){let i=await r(n.getMediaUploadUrl(o.id,s.sessionToken,s.user.access_token,"deliberation",t,e.csv.filenameSuffix));(0,T.s)(i)&&(console.debug("Uploading transcription CSV...",i),await r((0,I.q)(e.csv.blob,"text/csv",i.uploadUrl,!0,"uploading transcription CSV")))}console.debug("Upload transcription complete.")},V=(0,Y.A)(),X=C||k||P;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(O,{startIcon:X&&(0,i.jsx)(z.A,{htmlColor:C?V.palette.recordingEnabled.main:k?V.palette.recordingUploading.main:P?V.palette.recordingFailed.main:V.palette.recordingDisabled.main}),endIcon:(0,i.jsx)(F.A,{color:"action"}),sx:{opacity:p?1:.3},text:"".concat(u("transcribing.transcribing"),": ").concat(C?"Active":k?"Uploading...":P?"Upload error":"Inactive"),ariaLabel:u("transcribing.transcribingInformation"),children:(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[!M&&(0,i.jsx)(U.A,{variant:p?"contained":"outlined",color:p?"primary":"buttonStandard",onClick:()=>K(w),children:(0,i.jsx)(x.A,{i18nKey:"transcribing.startTranscribing"})}),M&&(0,i.jsx)(U.A,{variant:"outlined",color:"buttonStandard",onClick:()=>{B(),b(!1)},children:(0,i.jsx)(x.A,{i18nKey:"transcribing.stopTranscribing"})}),l.recordingId&&(0,i.jsxs)(v.A,{variant:"body2",children:[(0,i.jsx)(x.A,{i18nKey:"transcribing.transcriptionId"}),": ",w,(0,i.jsx)("br",{})]}),M&&(0,i.jsxs)(v.A,{variant:"body2",sx:{fontSize:"0.5rem"},children:[(0,i.jsx)(x.A,{i18nKey:"transcribing.transcribing"}),": ",$]}),(0,i.jsx)(H.A,{sx:{marginTop:"0.5rem"},children:(0,i.jsx)(Z.A,{control:(0,i.jsx)(J.A,{checked:f,onChange:()=>{g(e=>!e)},sx:{margin:"0 0.5rem 0 0.75rem"}}),label:(0,i.jsx)(x.A,{i18nKey:"transcribing.automaticTranscribing"}),sx:{userSelect:"none"}})}),P&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center"},children:[(0,i.jsx)(z.A,{htmlColor:V.palette.recordingFailed.main}),(0,i.jsx)(v.A,{variant:"body1",children:(0,i.jsx)(x.A,{i18nKey:"transcribing.transcriptionUploadFailed"})})]}),(0,i.jsxs)(v.A,{variant:"body2",children:[(0,i.jsx)(x.A,{i18nKey:"transcribing.transcriptionCouldNotUpload"}),"."]}),q&&(null==(e=q.csv)?void 0:e.blob)&&N&&(null==(t=q.csv)?void 0:t.filenameSuffix)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U.A,{variant:"outlined",color:"buttonStandard",onClick:()=>G(),children:(0,i.jsx)(x.A,{i18nKey:"button.retryUpload"})}),(0,i.jsx)(U.A,{variant:"outlined",color:"buttonStandard",onClick:()=>(()=>{var e,t;if(void 0!==q&&void 0!==q.csv&&(null==(e=q.csv)?void 0:e.blob.size)!==0){let e="transcription-".concat(null!=N?N:"unknown",".").concat(q.csv.filenameSuffix);console.debug("Downloading transcription..."),t=q.csv.blob,R(URL.createObjectURL(t),e)}console.debug("Transcription blob empty. Skipping download.")})(),children:(0,i.jsx)(x.A,{i18nKey:"transcribing.downloadTranscription"})})]})]})]})})})}function e0(){let{session:e}=(0,A.useContext)(c.$);return(0,i.jsxs)(j.A,{sx:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:"white",p:1,borderRadius:2},children:[(0,i.jsx)(t=>{let{showBadge:n}=t;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(j.A,{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",children:[(0,i.jsx)("img",{src:"/icons/home.svg",style:{height:"2rem",width:"auto",verticalAlign:"middle",marginRight:12,paddingBottom:4}}),n&&(0,i.jsx)(w.A,{color:"primary",badgeContent:a.ve[e.facilitationState],anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,i.jsx)(v.A,{variant:"h4",component:"h1",children:e.sessionName})}),!n&&(0,i.jsx)(v.A,{variant:"h4",component:"h1",children:e.sessionName})]})})},{showBadge:!1}),(0,i.jsxs)(j.A,{sx:{flexGrow:1,display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",gap:4},children:[(0,i.jsx)(eq,{}),e.remoteConfiguration===a.LQ.InPerson&&(0,i.jsx)(eo,{}),e.remoteConfiguration===a.LQ.RemoteWithVideoCall&&(0,i.jsx)(eX,{}),(0,i.jsx)(ey,{}),(0,i.jsx)(C,{}),(0,i.jsx)(eG,{})]})]})}function e1(e){let{notes:t}=e;return(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}var e2=n(29999),e4=n(27747),e5=n(2021),e3=n(99496);function e8(e){let{session:t}=(0,A.useContext)(c.$),[n,r]=(0,A.useState)(!1),[o,s]=(0,A.useState)(!1),[l,d]=(0,A.useState)(!1);return(0,A.useEffect)(()=>{s(t.facilitationState===a.ve.Open)},[t.facilitationState]),(0,A.useEffect)(()=>{d(t.remoteConfiguration===a.LQ.InPerson)},[t.remoteConfiguration]),(0,A.useEffect)(()=>{r(o&&l)},[o,l]),(0,i.jsxs)(e4.A,{fullWidth:!0,maxWidth:"sm",open:n,onClose:()=>r(!1),children:[(0,i.jsxs)(e5.A,{children:["The workshop is now open",(0,i.jsx)(j.A,{style:{position:"absolute",top:0,right:0},children:(0,i.jsx)(ep.A,{"aria-label":"close",onClick:()=>r(!1),children:(0,i.jsx)(e2.A,{})})})]}),(0,i.jsx)(e3.A,{children:(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsxs)("ul",{children:[o&&(0,i.jsx)("li",{children:"Participants will now be able to enter the session."}),l&&(0,i.jsxs)("li",{children:["Relevant sections will be ",(0,i.jsx)("b",{children:"automatically recorded"}),", unless you disable this feature."]})]}),(0,i.jsx)(U.A,{variant:"contained",sx:{alignSelf:"center",textTransform:"uppercase"},onClick:()=>r(!1),children:"Continue"})]})})]})}let e7=e=>e.remoteConfiguration===a.LQ.RemoteWithVideoCall?"left":"right",e9=e=>e.remoteConfiguration===a.LQ.RemoteWithVideoCall,e6=e=>e.remoteConfiguration!==a.LQ.RemoteWithVideoCall;function te(){let{presentation:e,previews:t}=(0,A.useContext)(u.z),{slideData:n}=(0,d.Zm)(),{session:r}=(0,A.useContext)(c.$),[o,s]=(0,A.useState)(e6(r)),[l,v]=(0,A.useState)(e9(r)),[w,y]=(0,A.useState)(e7(r));return(0,A.useEffect)(()=>{s(e6(r)),v(e9(r)),y(e7(r))},[r]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(j.A,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:1,p:1,overflow:"hidden"},children:[(0,i.jsx)(j.A,{children:(0,i.jsx)(e0,{})}),(0,i.jsxs)(j.A,{sx:{flexGrow:1,display:"flex",flexDirection:"row",gap:1,overflowY:"hidden"},children:[(0,i.jsxs)(j.A,{sx:{display:"flex",flexDirection:"column",width:"50vw",gap:1,flexShrink:0},children:[(0,i.jsx)(b,{sx:{flexGrow:1,overflow:"hidden",minHeight:"50vh"},children:e}),o&&(0,i.jsx)(b,{children:t}),"left"===w&&(0,i.jsx)(j.A,{sx:{flexGrow:1,display:"block",overflowY:"hidden"},children:(0,i.jsx)(b,{scrolling:!0,sx:{height:"100%"},children:(0,i.jsx)(e1,{notes:n.notes})})})]}),(0,i.jsxs)(j.A,{sx:{flexGrow:1,width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:1},children:[l&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(g.A,{sx:{flexGrow:1},joinView:(0,i.jsx)(()=>(0,i.jsx)(m.A,{preTitle:(0,i.jsx)(x.A,{i18nKey:"onboarding.thanks"}),title:(0,i.jsx)(x.A,{i18nKey:"onboarding.almostThere"}),bar:"Connecting your video call..."}),{}),children:(0,i.jsxs)(j.A,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",gap:1},children:[(0,i.jsx)(h.Ay,{role:a.sW.Controller,children:(0,i.jsx)(f.A,{sx:{flexGrow:1},isPreview:!1})}),(0,i.jsx)(j.A,{className:"call-controls-container",sx:{backgroundColor:"callControlPanelBackground.main",borderRadius:"0.5rem"},children:(0,i.jsx)(p.Ay,{direction:"row",showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1,isPreview:!1})})]})})}),"right"===w&&(0,i.jsx)(j.A,{sx:{flexGrow:1,display:"block",overflowY:"hidden"},children:(0,i.jsx)(b,{scrolling:!0,sx:{height:"100%"},children:(0,i.jsx)(e1,{notes:n.notes})})})]})]})]}),(0,i.jsx)(e8,{})]})}var tt=n(11265),tn=n(96827);function ti(e){return(0,i.jsx)(i.Fragment,{children:o.XF?(0,i.jsx)(tt.A,{}):(0,i.jsx)(tn.A,{sid:e.sid,joinCode:e.joinCode,refresh:e.refresh,role:a.sW.Controller,children:(0,i.jsxs)(s.A,{role:a.sW.Controller,children:[(0,i.jsx)(l.A,{}),(0,i.jsx)(te,{})]})})})}var tr=n(20063);function to(){let e=(0,tr.useSearchParams)(),t=e.get("sid"),n=e.get("code"),o="true"===e.get("refresh");return null===t||null===n?(0,i.jsx)("p",{children:"Missing session id or join code"}):(0,i.jsx)(r.A,{searchParams:e,children:(0,i.jsx)(ti,{sid:t,joinCode:n,refresh:o})})}},77240:(e,t,n)=>{"use strict";n.d(t,{f:()=>i,k:()=>r});let i=e=>"".concat(window.location.href.split("/")[0],"//").concat(window.location.href.split("/")[2],"/participant/session?sid=").concat(e.id,"&code=").concat(e.joinCode),r=e=>"".concat(window.location.href.split("/")[0],"//").concat(window.location.href.split("/")[2],"/facilitator/session?sid=").concat(e.id,"&code=").concat(e.joinCode)},87354:(e,t,n)=>{Promise.resolve().then(n.bind(n,8405))}},e=>{e.O(0,[935,360,966,421,779,283,339,210,840,434,848,801,712,555,183,590,773,441,255,358],()=>e(e.s=87354)),_N_E=e.O()}]);