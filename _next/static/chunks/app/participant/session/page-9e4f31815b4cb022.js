(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{83686:function(o,s,l){Promise.resolve().then(l.bind(l,62448))},62448:function(o,s,l){"use strict";l.r(s),l.d(s,{default:function(){return K}});var e=l(57437),r=l(53622),t=l(2265),a=l(63858),i=l(94547),n=l(56832),c=l(78364),d=l(71432),w=l(96608),p=l(4766),u=l(93191),S=l(37570),b=l(4087),f=l(23336),v=l(89504),h=l(15785),x=l(40772),g=l(59676),m=l(81386),j=l(22960),y=l(31193),C=l(60335),Z=l(29921),E=l(88880);let R="".concat(960," / ").concat(700),k={1:{col:3,row:1,span:{cols:1,rows:1}},2:{col:3,row:2,span:{cols:1,rows:1}},3:{col:3,row:3,span:{cols:1,rows:1}},4:{col:2,row:3,span:{cols:1,rows:1}},5:{col:1,row:3,span:{cols:1,rows:1}},6:{col:4,row:1,span:{cols:1,rows:1}},7:{col:4,row:2,span:{cols:1,rows:1}},8:{col:4,row:3,span:{cols:1,rows:1}},9:{col:4,row:4,span:{cols:1,rows:1}},10:{col:3,row:4,span:{cols:1,rows:1}},11:{col:2,row:4,span:{cols:1,rows:1}},12:{col:1,row:4,span:{cols:1,rows:1}},13:{col:5,row:1,span:{cols:1,rows:1}},14:{col:5,row:2,span:{cols:1,rows:1}},15:{col:5,row:3,span:{cols:1,rows:1}},16:{col:5,row:4,span:{cols:1,rows:1}},17:{col:6,row:1,span:{cols:1,rows:1}},18:{col:6,row:2,span:{cols:1,rows:1}},19:{col:6,row:3,span:{cols:1,rows:1}},20:{col:6,row:4,span:{cols:1,rows:1}},21:{col:6,row:5,span:{cols:1,rows:1}},22:{col:5,row:5,span:{cols:1,rows:1}},23:{col:4,row:5,span:{cols:1,rows:1}},24:{col:3,row:5,span:{cols:1,rows:1}},25:{col:2,row:5,span:{cols:1,rows:1}},26:{col:1,row:5,span:{cols:1,rows:1}}},B={0:{[h.S.default]:{cols:1,rows:1},[h.S.deliberation]:{cols:1,rows:1}},1:{[h.S.default]:{cols:3,rows:2},[h.S.deliberation]:{cols:3,rows:2}},2:{[h.S.default]:{cols:3,rows:2},[h.S.deliberation]:{cols:3,rows:2}},3:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:3,rows:3}},4:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:3,rows:3}},5:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:3,rows:3}},6:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:3}},7:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:3}},8:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:3}},9:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:4}},10:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:4}},11:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:4}},12:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:4}},13:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:5,rows:4}},14:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:5,rows:4}},15:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:5,rows:4}},16:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:5,rows:4}},17:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:4}},18:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:4}},19:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:4}},20:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:4}},21:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:5}},22:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:5}},23:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:5}},24:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:5}},25:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:5}},26:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:5}}},N={0:{[h.S.default]:{col:1,row:1,span:{cols:1,rows:1}},[h.S.deliberation]:{col:1,row:1,span:{cols:1,rows:1}}},1:{[h.S.default]:{col:1,row:1,span:{cols:2,rows:2}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},2:{[h.S.default]:{col:1,row:1,span:{cols:2,rows:2}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},3:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:3}}},4:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},5:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},6:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},7:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},8:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},9:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},10:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},11:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},12:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},13:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},14:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},15:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},16:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},17:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},18:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},19:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},20:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},21:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},22:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},23:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},24:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},25:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},26:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}}},T=o=>o.map((o,s)=>(0,e.jsx)(E.ZP,{test:!0,subscription:o},"test-tile-".concat(s,"-").concat(o.subscriptionId)));var F=(0,t.memo)(function(o){var s,l,r,i,n,c,d,w;let{tiles:p}=(0,t.useContext)(v.fp),[u,S]=(0,t.useState)(!1),[b,f]=(0,t.useState)(),E=(0,t.useRef)(null),[F,A]=(0,t.useState)([]);(0,Z.y)(E,A);let P=void 0!==o.testSubscriptions;(0,t.useEffect)(()=>{var s,l;let e=Math.min(null!==(l=null==p?void 0:p.length)&&void 0!==l?l:null===(s=o.testSubscriptions)||void 0===s?void 0:s.length,26),r=o.activity,t=B[e][r],a={w:960*t.cols,h:700*t.rows},i="repeat(".concat(t.cols,", 1fr)"),n="repeat(".concat(t.rows,", 1fr)"),c=o.enableExpandButton&&e>0&&o.activity===h.S.deliberation;f({colsTemplate:i,rowsTemplate:n,cells:t,gridAspect:a,litter:e,activity:r,showExpandButton:c,tiles:o.testSubscriptions?T(o.testSubscriptions):p})},[P,p,o.testSubscriptions,o.activity,o.enableExpandButton]),(0,t.useEffect)(()=>{b&&b.activity!==h.S.deliberation&&S(!1)},[b]);let[_]=(0,x.u)({duration:200}),D="0.5rem",L=(0,j.Z)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(y.Z,{className:"tiles-inner-container",sx:{width:null!==(d=null===(s=o.availableSpace)||void 0===s?void 0:s.w)&&void 0!==d?d:"100%",height:null!==(w=null===(l=o.availableSpace)||void 0===l?void 0:l.h)&&void 0!==w?w:"100%",position:"relative"},children:b&&(0,e.jsx)(y.Z,{className:"tiles-container",sx:{aspectRatio:"".concat(b.gridAspect.w,"/").concat(b.gridAspect.h),objectFit:"contain",height:a.G6?null===(r=o.availableSpace)||void 0===r?void 0:r.h:void 0,width:a.G6?null===(i=o.availableSpace)||void 0===i?void 0:i.w:void 0,maxHeight:null===(n=o.availableSpace)||void 0===n?void 0:n.h,maxWidth:null===(c=o.availableSpace)||void 0===c?void 0:c.w,mx:"auto",my:"auto",p:1},children:(0,e.jsxs)(y.Z,{className:"tiles-grid",ref:_,sx:{width:"100%",height:"100%",display:"grid",gap:D,gridTemplateColumns:b.colsTemplate,gridTemplateRows:b.rowsTemplate},children:[(0,e.jsxs)(y.Z,{ref:E,sx:{position:u?"absolute":"relative",gridColumnStart:u?void 0:N[b.litter][b.activity].col,gridColumnEnd:u?void 0:N[b.litter][b.activity].col+N[b.litter][b.activity].span.cols,gridRowStart:u?void 0:N[b.litter][b.activity].row,gridRowEnd:u?void 0:N[b.litter][b.activity].row+N[b.litter][b.activity].span.rows,width:u?void 0:"100%",height:u?void 0:"100%",left:u?"2.5vh":void 0,top:u?"2.5vh":void 0,bottom:u?"2.5vh":void 0,right:u?"2.5vh":void 0,zIndex:u?10:void 0},children:[b.showExpandButton&&(0,e.jsx)(y.Z,{sx:{position:"absolute",top:"1rem",right:"1rem",zIndex:20},children:(0,e.jsx)(C.Z,{"aria-label":"expand presentation button",onClick:()=>S(!u),sx:{border:"2px solid",borderColor:L.palette.promptPanelBackground.main,background:L.palette.slideSectionBackground.main},children:u?(0,e.jsx)(g.Z,{}):(0,e.jsx)(m.Z,{})})}),(0,e.jsx)(y.Z,{sx:{width:"100%",height:"100%",borderRadius:2,border:u?"solid 2px white":void 0},className:"shadow",children:o.presentation})]},"presentation-cell"),b.activity===h.S.deliberation&&(0,e.jsx)(e.Fragment,{children:b.tiles.map((o,s)=>{let l=k[s+1];return void 0!==l?(0,e.jsx)(y.Z,{sx:{gridColumnStart:l.col,gridColumnEnd:l.col+l.span.cols,gridRowStart:l.row,gridRowEnd:l.row+l.span.rows},children:o},"video-cell-at-".concat(s)):(console.warn("Tile with index ".concat(s," not rendered - no position data available")),(0,e.jsx)(e.Fragment,{}))})}),b.activity!=h.S.deliberation&&(0,e.jsxs)(e.Fragment,{children:[b.tiles.slice(0,Math.min(2,b.litter)).map((o,s)=>(0,e.jsx)(y.Z,{sx:{gridColumn:B[b.litter][b.activity].cols,gridRow:s+1},children:o},"video-cell-at-".concat(s))),b.litter>2&&(0,e.jsx)(y.Z,{sx:{gridColumn:b.cells.cols,gridRowStart:3,gridRowEnd:b.cells.rows+1,overflowY:"auto"},children:b.tiles.slice(2).map((o,s)=>(0,e.jsx)(y.Z,{sx:{width:"100%",aspectRatio:R,mb:D},children:o},"video-cell-at-".concat(s)))})]})]})})})})},(o,s)=>{var l,e;let r=o.activity===s.activity,t=o.availableSpace===s.availableSpace,a=o.enableExpandButton===s.enableExpandButton,i=o.presentation===s.presentation,n=(0,v.wB)(null!==(l=o.testSubscriptions)&&void 0!==l?l:[],null!==(e=s.testSubscriptions)&&void 0!==e?e:[]);return r&&t&&a&&i&&n}),A=l(61190),P=l(44100),_=l(33351),D=l(43061),L=l(96537),M=l(40395);function O(){let[o,s]=(0,t.useState)(!1);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(L.Z,{disableFocusRipple:!0,sx:o=>({border:"2px solid",borderColor:"buttonDangerReverse.main",color:"buttonDangerReverse.main",fontWeight:"bold",px:3,py:1,"&:hover":{backgroundColor:"buttonDangerReverse.main",border:"2px solid",borderColor:"buttonDangerReverse.main",color:"buttonStandard.main"},"&:focus-visible":{...o.customStyles.focusRingReverse,backgroundColor:"buttonDangerReverse.main",color:"buttonStandard.main",outlineOffset:"2px"}}),variant:"outlined",onClick:()=>s(!0),children:(0,e.jsx)(b.Z,{i18nKey:"onboarding.leaveCall"})}),(0,e.jsx)(M.Z,{open:o,setOpen:s,onSelect:o=>{"leave"===o&&window.location.reload()},prompt:"Are you sure you want to leave the call?",options:[{key:"return",text:"RETURN TO THE CALL",filled:!0},{key:"leave",text:"LEAVE THE CALL",filled:!1}]})]})}function G(){let{session:o}=(0,t.useContext)(S.H),{slideData:s}=(0,p.Ao)(),l=(0,t.useContext)(u.N),[r,a]=(0,t.useState)(!1),[n,c]=(0,t.useState)({activity:s.activity,enableExpandButton:!0,presentation:l.presentation,availableSpace:void 0});(0,t.useEffect)(()=>{a(o.remoteConfiguration===i.VS.RemoteWithVideoCall)},[o]),(0,t.useEffect)(()=>{c({...n,activity:s.activity,enableExpandButton:!0,presentation:l.presentation})},[s.activity]);let[d,w]=(0,D.xE)();return(0,t.useEffect)(()=>{w&&w.width&&w.height&&(c({...n,availableSpace:{w:w.width,h:w.height}}),console.debug("available space: ".concat(w.width," x ").concat(w.height)))},[w]),(0,e.jsxs)(e.Fragment,{children:[r&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(A.Z,{sx:{flexGrow:1},joinView:(0,e.jsx)(()=>(0,e.jsx)(P.Z,{preTitle:(0,e.jsx)(b.Z,{i18nKey:"onboarding.thanks"}),title:(0,e.jsx)(b.Z,{i18nKey:"onboarding.almostThere"}),bar:"Connecting your video call..."}),{}),children:[(0,e.jsxs)(_.Z,{className:"available-space-and-controls-container",sx:{width:"100%",height:"100%",position:"absolute",left:0,top:0,right:0,bottom:0,display:"flex",flexDirection:"column"},children:[(0,e.jsx)(_.Z,{className:"available-space-ref",ref:d,sx:{display:"block",flexGrow:1,m:0,p:0}}),(0,e.jsxs)(_.Z,{className:"call-controls-container",sx:{backgroundColor:"callControlPanelBackground.main",display:"grid",gap:2,gridTemplateColumns:"1fr 1fr 1fr",px:1},children:[(0,e.jsx)(_.Z,{}),(0,e.jsx)(f.ZP,{direction:"row",showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1,isPreview:!1}),(0,e.jsx)(_.Z,{sx:{alignSelf:"center",justifySelf:"end",pr:1},children:(0,e.jsx)(O,{})})]})]}),(0,e.jsx)(_.Z,{className:"tiles-outer-container",sx:{position:"absolute",left:0,top:0,right:0,display:"block"},children:(0,e.jsx)(v.ZP,{role:i._b.Client,children:(0,e.jsx)(F,{activity:n.activity,enableExpandButton:n.enableExpandButton,presentation:n.presentation,availableSpace:n.availableSpace})})})]})}),!r&&(0,e.jsx)(_.Z,{sx:{width:"100%",height:"100%",p:1,position:"relative"},children:l.presentation})]})}var H=l(25907);function V(o){return(0,t.useEffect)(()=>{(0,d.r)(window)&&window.addEventListener("beforeunload",o=>{o.preventDefault()})},[]),(0,e.jsx)(e.Fragment,{children:a.UA?(0,e.jsx)(w.Z,{}):(0,e.jsx)(H.Z,{sid:o.sid,joinCode:o.joinCode,refresh:o.refresh,role:i._b.Client,children:(0,e.jsxs)(n.Z,{role:i._b.Client,children:[(0,e.jsx)(c.Z,{}),(0,e.jsx)(G,{})]})})})}var I=l(16463);function K(){let o=(0,I.useSearchParams)(),s=o.get("sid"),l=o.get("code"),t="true"===o.get("refresh");return null===s||null===l?(0,e.jsx)("p",{children:"Missing session id or join code"}):(0,e.jsx)(r.Z,{searchParams:o,children:(0,e.jsx)(V,{sid:s,joinCode:l,refresh:t})})}}},function(o){o.O(0,[908,444,866,221,732,964,403,310,338,662,439,194,691,335,971,23,744],function(){return o(o.s=83686)}),_N_E=o.O()}]);